{% extends "main.html" %}


{%block login%}
<button onclick="location.href='{% url 'logout' %}'" class="btn btn-primary" type="submit">Log Out</button>
{%endblock%}

{%block navitems%}
<li class="nav-item active">
  <a class="nav-link" href={% url 'allContracts' %}>Contracts</a>
</li>
<li class="nav-item">
  <a class="nav-link" href={% url 'allTasks' %}>Your Tasks</a>
</li>
<li class="nav-item">
  <a class="nav-link" href={% url 'addTask' %}>New Task</a>
</li>
{%endblock%}

  {%block content%}
  <div class='container' id='contractCards'></div>

  <script>
    var contractListURL = "/catalog/rest_contract/";
    $(document).ready(
      function() {
        $.getJSON(contractListURL, {}, showContracts);
      }
    )

    function showContracts(contracts) {
      $("#rows").html("")
      var count = 0
      var content = '';
      $.each(contracts, function(idx, contract) {
        if (count == 0) {
          content += '<div class="row justify-content-md-center">'
        }
        content += '<div class="col-md-auto">'
        content += '<div class="card border-info mb-3" style="width: 18rem;">'
        content += '<div class="card-body">'
        content += '<h5 class="card-title">' + contract.contractName + '</h5>'
        content += '<h6 class="card-subtitle mb-2">' + contract.zakupkiId + '</h6>'
        content += '<h6 class="card-text ">Date Start: ' + contract.dateStart + '</h6>'
        content += '<h6 class="card-text">Date End: ' + contract.dateEnd + '</h6>'
        content += '<a href=' + contract.getLink + ' class="card-link">Open Contract</a>'
        content += '<a href="#" class="card-link">User List</a>'
        content += '</div>'
        content += '</div>'
        content += '</div>'

        count += 1
        if (count == 3) {
          content += '</div>'
          count = 0
        }
      });
      $("#contractCards").append(content)
    }
  </script>

  <style>
    #contractCards{
      padding-top: 10px;
    }
    .card-body {
      background: linear-gradient(to left, #85b4ff, #87CEFA);
      /* background: #e6e6fa; */
    }

    .card-title,
    .card-text {
      color: #000061;
    }

    .card-subtitle {
      /* color: #000061; */
      color: #120a8f;
    }

    .card-link {
      color: #f0f8ff;
    }
  </style>

  {% endblock %}

<!-- <style>
      #ButnNav
      {
        margin-left: auto;
        margin-right: 1%;
      }
      .navbar
      {
        background-color:#80c8ff

      }
      .card-body
      {
        background:linear-gradient(to left, #85b4ff, #87CEFA);
        /* background: #e6e6fa; */
      }
      .card-title, .card-text
      {
        color: #000061;
      }
      .card-subtitle
      {
        /* color: #000061; */
        color: #120a8f;
      }
      .card-link
      {
        color: #f0f8ff;
      }
      .hr-xs
      {
        margin-top:5px;
        margin-bottom:5px
      }
      .table-page
      {
        background-color:#b3deff
      }
      .btn-block {
        width: 250px;
        background: #29aafe;
        border-color: #29aafe;
      }
      .border-info{
        margin-top: 5%;
      }
    </style> -->
